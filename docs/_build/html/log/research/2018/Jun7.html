

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Thu 7 Jun 2018 &mdash; AgentSteve  documentation</title>
  

  
  
  
  

  

  
  
    

  

  
    <link rel="stylesheet" href="../../../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../../_static/pygments.css" type="text/css" />
    <link rel="index" title="Index" href="../../../genindex.html" />
    <link rel="search" title="Search" href="../../../search.html" />
    <link rel="next" title="Change Logs" href="../../change/log_index.html" />
    <link rel="prev" title="Wed 6 Jun 2018" href="Jun6.html" /> 

  
  <script src="../../../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../../../index.html" class="icon icon-home"> AgentSteve
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../../dir_structure.html">Directory Structure</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../log_index.html">Research Logs</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="May22.html">Tue May 22 2018</a></li>
<li class="toctree-l2"><a class="reference internal" href="May23.html">Wed May 23 2018</a></li>
<li class="toctree-l2"><a class="reference internal" href="May29.html">Tue May 29 2018</a></li>
<li class="toctree-l2"><a class="reference internal" href="Jun6.html">Wed 6 Jun 2018</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">Thu 7 Jun 2018</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#intelligence-system">Intelligence System</a></li>
<li class="toctree-l3"><a class="reference internal" href="#networking-prototype">Networking Prototype</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#about-design-and-codes">About Design And Codes</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../change/log_index.html">Change Logs</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../../index.html">AgentSteve</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../../index.html">Docs</a> &raquo;</li>
        
          <li><a href="../log_index.html">Research Logs</a> &raquo;</li>
        
      <li>Thu 7 Jun 2018</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../../../_sources/log/research/2018/Jun7.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="thu-7-jun-2018">
<h1>Thu 7 Jun 2018<a class="headerlink" href="#thu-7-jun-2018" title="Permalink to this headline">¶</a></h1>
<p>record video streams as individual frames rather than video - eg <code class="docutils literal notranslate"><span class="pre">MalmoPython.MissionSpec.recordBitmaps(MalmoPython.FrameType.DEPTH_MAP)</span></code>.</p>
<p>But this API seems to be not working.</p>
<p>From <a class="reference external" href="https://github.com/Microsoft/malmo/blob/master/Malmo/src/MissionRecordSpec.h">Malmo/src/MissionRecordSpec.h</a> on Malmo’s GitHub page, bitmaps and MP4 cannot both be recorded for a given video producer.</p>
<p>After checking what <a class="reference external" href="https://github.com/Microsoft/malmo/blob/master/Malmo/src/TimestampedVideoFrame.h">frame types</a> Malmo defined, I tried the type <code class="docutils literal notranslate"><span class="pre">VIDEO</span></code>, and things run successfully. Frames are recorded in <a class="reference external" href="http://netpbm.sourceforge.net/doc/ppm.html">ppm</a> format, which can be processed in a very straightforward way (but this is also a highly inefficient format). For the record,</p>
<div class="section" id="intelligence-system">
<h2>Intelligence System<a class="headerlink" href="#intelligence-system" title="Permalink to this headline">¶</a></h2>
<p>I am going to seperate intelligence system, which plays the role of brain for our agent, from Malmo. The working relationship between Minecraft, Malmo and this system can be summarize as the following flowchart:</p>
<img alt="../../../_images/system01.jpg" src="../../../_images/system01.jpg" />
</div>
<div class="section" id="networking-prototype">
<h2>Networking Prototype<a class="headerlink" href="#networking-prototype" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li>Directory: <em>Research/work_table/</em></li>
<li>Files: <em>server02.py</em>, <em>client02.py</em></li>
</ul>
<p>In order to build the system, we need to facilitate video stream feed from Malmo end to Intelligence system end. We decided to use <em>socket</em> to achieve this.</p>
<p>Today I have built a very simple server and client pair, as can be easily found under <a class="reference external" href="https://github.com/RockmanZheng/AgentSteve/tree/master/Research/work_table">work table directory</a>. Simply run (with Python 2.7)</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>python server02.py
</pre></div>
</div>
<p>to start up the server and run</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>python client02.py
</pre></div>
</div>
<p>to open a client. Then you should see server consistenly sending “HEY YOU” message to client, as displayed on client side. You can open at most 100 clients simultaneously. The server will simply provide the same service to every client connected to it, since our ultimate goal is to provide one single video stream to these clients.</p>
<div class="section" id="about-design-and-codes">
<h3>About Design And Codes<a class="headerlink" href="#about-design-and-codes" title="Permalink to this headline">¶</a></h3>
<p>Python simply does not provide a ready-to-use module for our video streaming feed purpose. <code class="docutils literal notranslate"><span class="pre">SocketServer.TCPServer</span></code> seems to fit. But a little research revealed that it is mainly designed for being the base class for <code class="docutils literal notranslate"><span class="pre">BaseHTTPServer</span></code> etc. Real time stream protocol (RTSP) seems not supported. So I need to write my own server and client to enable consistent data feed.</p>
<p>We used 1 thread for listening and accepting incoming connect request. When we accept a client, we create a service thread for it to consistently provide service. Specific service will be implemented in derived class by overriding <code class="docutils literal notranslate"><span class="pre">MyBaseServer.serve</span></code> method.</p>
<p>On the other hand, client is single-threaded. And any derived class of <code class="docutils literal notranslate"><span class="pre">MyBaseClient</span></code> only needs to override method <code class="docutils literal notranslate"><span class="pre">work</span></code> to specify jobs on client side.</p>
</div>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="../../change/log_index.html" class="btn btn-neutral float-right" title="Change Logs" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="Jun6.html" class="btn btn-neutral" title="Wed 6 Jun 2018" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2018, RockmanZheng.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../../../',
            VERSION:'',
            LANGUAGE:'None',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true,
            SOURCELINK_SUFFIX: '.txt'
        };
    </script>
      <script type="text/javascript" src="../../../_static/jquery.js"></script>
      <script type="text/javascript" src="../../../_static/underscore.js"></script>
      <script type="text/javascript" src="../../../_static/doctools.js"></script>
      <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>

  

  
  
    <script type="text/javascript" src="../../../_static/js/theme.js"></script>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>